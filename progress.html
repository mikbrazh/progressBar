<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
    .quiz-progress-bar {
        width: 100%;
    }

    .quiz-progress-bar__bar {
        background-color: lightgrey;
    }

    .quiz-progress-bar__progress {
        width: 0;
        height: 30px;
        background-color: tomato;
        text-align: center;
        line-height: 30px;
        color: white;
    }
    </style>
</head>

<body>
    <h1>JavaScript Progress Bar</h1>
    <div class="quiz-progress-bar">
        <div class="quiz-progress-bar__value">0%</div>
        <div class="quiz-progress-bar__bar">
            <div class="quiz-progress-bar__progress">0%</div>
        </div>
    </div>
    <br>
    <button onclick="qwe.moveProgress()">Запустить</button>
    <script>
    const quizData = [{
            number: 1,
        },
        {
            number: 2,
        },
        {
            number: 3,
        },
        {
            number: 4,
        },
        {
            number: 5,
        },
    ]

    class Quiz {
        constructor() {
            this.width = 0;
            this.step = null;
            this.initialStep = null;

            this.getStep();

        }

        moveProgress() {
            const $el__value = document.querySelector(".quiz-progress-bar__value");
            const $el__progress = document.querySelector(".quiz-progress-bar__progress");

            const interval = setInterval(moveFrame, 15);

            // console.log('width: ' + width);
            // console.log('step: ' + step);


                let width = 0;
            function moveFrame() {
                
                if (width >= this.step || width >= 100) {
                    clearInterval(interval);
                    width = this.width;
                    this.step += this.initialStep;
                } else {
                    width++;
                    $el__value.innerHTML = width + "%";
                    $el__progress.innerHTML = width + "%";
                    $el__progress.style.width = width + "%";
                }
            }
        }

        getStep() {
            let numberOfQuestions = quizData[quizData.length - 1].number;
            let percent = Math.ceil(100 / 3);

            this.initialStep = percent;
            this.step = percent;
        }
    }

    let qwe = new Quiz();

console.log('1: ' + qwe.step);
console.log('2: ' + qwe.initialStep);



    // let width = 0;
    // const initialStep = getStep();
    // let step = getStep();

    // console.log('initial step: ' + step);

    // function moveProgress() {
    //     const $el__value = document.querySelector(".quiz-progress-bar__value");
    //     const $el__progress = document.querySelector(".quiz-progress-bar__progress");

    //     const interval = setInterval(moveFrame, 15);

    //     console.log('width: ' + width);
    //     console.log('step: ' + step);

    //     function moveFrame() {
    //         if (width >= step || width >= 100) {
    //             clearInterval(interval);
    //             width = width;
    //             step += initialStep;
    //         } else {
    //             width++;
    //             $el__value.innerHTML = width + "%";
    //             $el__progress.innerHTML = width + "%";
    //             $el__progress.style.width = width + "%";
    //         }
    //     }
    // }

    // function getStep() {
    //     let = numberOfQuestions = quizData[quizData.length - 1].number;
    //     let percent = Math.ceil(100 / 3);

    //     return percent;
    // }

    </script>
</body>

</html>